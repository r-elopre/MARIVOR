{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow-lg border-0">
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <div class="fs-1 text-primary mb-3">ÔøΩ</div>
                        <h2 class="fw-bold">Welcome to Marivor</h2>
                        <p class="text-muted">Login with your face recognition code</p>
                    </div>

                    <!-- Face Code Login Form -->
                    <form action="{{ url_for('face_login') }}" method="POST">
                        <div class="mb-3">
                            <label for="face_code" class="form-label fw-semibold">6-Digit Face Code</label>
                            <input type="text" 
                                   class="form-control form-control-lg text-center" 
                                   id="face_code" 
                                   name="face_code" 
                                   placeholder="000000"
                                   pattern="[0-9]{6}" 
                                   maxlength="6"
                                   style="letter-spacing: 0.3em; font-size: 1.5rem;"
                                   required>
                            <div class="form-text">
                                <small class="text-muted">
                                    <i class="bi bi-info-circle"></i> 
                                    Enter the 6-digit code from your face registration
                                </small>
                            </div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="bi bi-unlock-fill"></i> Login with Face Code
                            </button>
                        </div>
                    </form>

                    <!-- Alternative Registration -->
                    <div class="text-center my-4">
                        <div class="d-flex align-items-center">
                            <hr class="flex-grow-1">
                            <span class="px-3 text-muted">OR</span>
                            <hr class="flex-grow-1">
                        </div>
                    </div>

                    <div class="d-grid">
                        <a href="{{ url_for('face_register') }}" class="btn btn-outline-primary btn-lg">
                            <i class="bi bi-camera-fill"></i> New? Register with Face Detection
                        </a>
                    </div>

                    <!-- Features -->
                    <div class="mt-4">
                        <hr class="my-4">
                        <div class="row text-center">
                            <div class="col-4">
                                <div class="fs-5 text-success mb-2">üîê</div>
                                <small class="text-muted">Secure</small>
                            </div>
                            <div class="col-4">
                                <div class="fs-5 text-info mb-2">‚ö°</div>
                                <small class="text-muted">Fast</small>
                            </div>
                            <div class="col-4">
                                <div class="fs-5 text-warning mb-2">ÔøΩ</div>
                                <small class="text-muted">Face Recognition</small>
                            </div>
                        </div>
                    </div>

                    <!-- Info -->
                    <div class="alert alert-info mt-4" role="alert">
                        <div class="d-flex">
                            <div class="me-2">
                                <i class="bi bi-shield-check"></i>
                            </div>
                            <div>
                                <strong>Face Recognition Login</strong><br>
                                <small>Secure login using your unique face detection code. Register once and login instantly!</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
// Face code input formatting
document.getElementById('face_code').addEventListener('input', function(e) {
    // Remove any non-digit characters
    let value = e.target.value.replace(/\D/g, '');
    
    // Limit to 6 digits
    if (value.length > 6) {
        value = value.substring(0, 6);
    }
    
    e.target.value = value;
});

// Auto-focus on face code input
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('face_code').focus();
});
</script>
{% endblock %}